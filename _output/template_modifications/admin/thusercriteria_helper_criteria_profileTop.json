{
    "template": "helper_criteria",
    "description": "Add user criteria after profile_top hook.",
    "execution_order": 10,
    "enabled": true,
    "action": "str_replace",
    "find": "<!--[XF:user:profile_top]-->",
    "replace": "$0\n\n<xf:optgroup label=\"{{ phrase('style:') }}\">\n\t<xf:set var=\"$fieldNameStyle\" value=\"{$xf.options.thusercriteria_prefix}style_ids\" />\t\n\t<xf:option name=\"user_criteria[{$fieldNameStyle}][rule]\" value=\"{$fieldNameStyle}\" selected=\"{$criteria.{$fieldNameStyle}}\"\n\t\t\t   label=\"{{ phrase('th_usercriteria_user_is_visiting_with_one_of_the_selected_styles:') }}\">\n\t\t<xf:select name=\"user_criteria[{$fieldNameStyle}][data][style_ids]\" size=\"4\" multiple=\"true\" value=\"{$criteria.{$fieldNameStyle}.style_ids}\">\n\t\t\t<xf:foreach loop=\"$data.styleTree.getFlattened(0)\" value=\"$treeEntry\">\n\t\t\t\t<xf:option value=\"{$treeEntry.record.style_id}\">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>\n\t\t\t</xf:foreach>\n\t\t</xf:select>\n\t</xf:option>\n\n\t<xf:set var=\"$fieldNameNotStyle\" value=\"{$xf.options.thusercriteria_prefix}not_style_ids\" />\t\n\t<xf:option name=\"user_criteria[{$fieldNameNotStyle}][rule]\" value=\"{$fieldNameNotStyle}\" selected=\"{$criteria.{$fieldNameNotStyle}}\"\n\t\t\t   label=\"{{ phrase('th_usercriteria_user_is_not_visiting_with_one_of_the_selected_styles:') }}\">\n\n\t\t<xf:select name=\"user_criteria[{$fieldNameNotStyle}][data][style_ids]\" size=\"4\" multiple=\"true\" value=\"{$criteria.{$fieldNameNotStyle}.style_ids}\">\n\t\t\t<xf:foreach loop=\"$data.styleTree.getFlattened(0)\" value=\"$treeEntry\">\n\t\t\t\t<xf:option value=\"{$treeEntry.record.style_id}\">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>\n\t\t\t</xf:foreach>\n\t\t</xf:select>\n\t</xf:option>\n</xf:optgroup>\n\n<xf:optgroup label=\"{{ phrase('language:') }}\">\n\t<xf:set var=\"$fieldNameLanguage\" value=\"{$xf.options.thusercriteria_prefix}language_ids\" />\t\n\t<xf:option name=\"user_criteria[{$fieldNameLanguage}][rule]\" value=\"{$fieldNameLanguage}\" selected=\"{$criteria.{$fieldNameLanguage}}\"\n\t\t\t   label=\"{{ phrase('th_usercriteria_user_is_visiting_with_one_of_the_selected_languages:') }}\">\n\t\t<xf:select name=\"user_criteria[{$fieldNameLanguage}][data][language_ids]\" size=\"4\" multiple=\"true\" value=\"{$criteria.{$fieldNameLanguage}.language_ids}\">\n\t\t\t<xf:foreach loop=\"$data.languageTree.getFlattened(0)\" value=\"$treeEntry\">\n\t\t\t\t<xf:option value=\"{$treeEntry.record.language_id}\">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>\n\t\t\t</xf:foreach>\n\t\t</xf:select>\n\t</xf:option>\n\n\t<xf:set var=\"$fieldNameNotLanguage\" value=\"{$xf.options.thusercriteria_prefix}not_language_ids\" />\t\n\t<xf:option name=\"user_criteria[{$fieldNameNotLanguage}][rule]\" value=\"{$fieldNameNotLanguage}\" selected=\"{$criteria.{$fieldNameNotLanguage}}\"\n\t\t\t   label=\"{{ phrase('th_usercriteria_user_is_not_visiting_with_one_of_the_selected_languages:') }}\">\n\n\t\t<xf:select name=\"user_criteria[{$fieldNameNotLanguage}][data][language_ids]\" size=\"4\" multiple=\"true\" value=\"{$criteria.{$fieldNameNotLanguage}.language_ids}\">\n\t\t\t<xf:foreach loop=\"$data.languageTree.getFlattened(0)\" value=\"$treeEntry\">\n\t\t\t\t<xf:option value=\"{$treeEntry.record.language_id}\">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>\n\t\t\t</xf:foreach>\n\t\t</xf:select>\n\t</xf:option>\n</xf:optgroup>"
}